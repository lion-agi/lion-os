# Element Class

## Overview

`Element` is the base class for identifiable objects in the Lion-OS framework. It inherits from both `BaseModel` (Pydantic) and `Observable`, providing validation, serialization, and identification capabilities.

## Class Definition

```python
class Element(BaseModel, Observable):
    ln_id: LnID = Field(
        default_factory=ID.id,
        title="Lion ID",
        description="Unique identifier for the element",
        frozen=True,
    )

    timestamp: float = Field(
        default_factory=lambda: time(type_="timestamp"),
        title="Creation Timestamp",
        frozen=True,
        alias="created",
    )
```

## Configuration

```python
model_config = ConfigDict(
    extra="forbid",           # No extra fields allowed
    arbitrary_types_allowed=True,  # Allow any type
    use_enum_values=True,     # Use enum values in serialization
    populate_by_name=True,    # Allow population by field name
)
```

## Core Features

### Identification
- Immutable Lion ID (`ln_id`)
- Auto-generated on creation
- Hashable using ID
- ID validation built-in

### Timestamps
- Creation timestamp (`timestamp`)
- Timezone-aware datetime access
- Multiple format support
- Immutable after creation

### Class Registration
- Automatic subclass registration
- Class name lookup
- Registry-based instantiation
- Subclass tracking

## Properties

```python
@property
def created_datetime(self) -> datetime:
    """Get creation time as datetime object."""
```

## Class Methods

```python
@classmethod
def class_name(cls) -> str:
    """Get class name."""

@classmethod
def from_dict(cls, data: dict, /, **kwargs: Any) -> T:
    """Create instance from dictionary."""
```

## Instance Methods

```python
def to_dict(self, **kwargs: Any) -> dict:
    """Convert to dictionary."""
```

## Field Validation

### ID Validation
```python
@field_validator("ln_id", mode="before")
def _validate_id(cls, value: ID.ID) -> str:
    """Ensure valid Lion ID."""
```

### Timestamp Validation
```python
@field_validator("timestamp", mode="before")
def _validate_timestamp(cls, value: Any) -> float:
    """Convert various formats to timestamp."""
```

Supported timestamp formats:
- int/float timestamps
- datetime objects
- ISO format strings
- Numeric strings

## Special Methods

```python
def __str__(self) -> str:
    """Human-readable representation."""
    # Format: ClassName(ln_id=123456.., timestamp=2024-01-01T12:00)

def __hash__(self) -> int:
    """Hash based on ln_id."""

def __bool__(self) -> bool:
    """Always True."""

def __len__(self) -> int:
    """Always 1."""
```

## Subclassing

Elements are automatically registered in the global class registry:

```python
class MyElement(Element):
    """Custom element class."""
    # Automatically registered
    # Inherits ID and timestamp
    # Can override from_dict if needed
```

## Serialization

### To Dictionary
```python
element_dict = element.to_dict()
# {
#     "ln_id": "...",
#     "timestamp": 1234567890.0,
#     "lion_class": "ElementClassName"
# }
```

### From Dictionary
```python
element = Element.from_dict({
    "ln_id": "...",
    "timestamp": 1234567890.0
})
```

## Notes

1. Identity:
   - IDs are immutable
   - Auto-generated by default
   - Validates on assignment

2. Time Handling:
   - Timestamps are immutable
   - Timezone-aware
   - Multiple format support

3. Validation:
   - ID format checking
   - Timestamp conversion
   - Configuration enforcement

4. Registry:
   - Automatic registration
   - Subclass tracking
   - Type-safe instantiation
